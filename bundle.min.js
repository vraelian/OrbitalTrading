function formatCredits(e,t=!0){let n=Math.floor(e),r=t?"âŒ¬ ":"";return n>=1e12?`${r}${(n/1e12).toFixed(2)}T`:n>=1e9?`${r}${(n/1e9).toFixed(2)}B`:n>=1e6?`${r}${(n/1e6).toFixed(2)}M`:n>=1e3?`${r}${(n/1e3).toFixed(1)}k`:`${r}${n.toLocaleString()}`}function calculateInventoryUsed(e){return e?Object.values(e).reduce((e,t)=>e+t.quantity,0):0}function getDaySuffix(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function getDateFromDay(e){let t=DATE_CONFIG.START_YEAR+Math.floor((e-1)/365),n=(e-1)%365,r=DATE_CONFIG.DAY_NAMES[(e-1+DATE_CONFIG.START_DAY_OF_WEEK)%7],a=0;for(let i=0;i<DATE_CONFIG.DAYS_IN_MONTH.length;i++){if(n<DATE_CONFIG.DAYS_IN_MONTH[i]){a=i;break}n-=DATE_CONFIG.DAYS_IN_MONTH[i]}let o=n+1,d=DATE_CONFIG.MONTH_NAMES[a];return`${r}, ${d} ${o}${getDaySuffix(o)}, ${t}`}function skewedRandom(e,t){return Math.floor(e+(t-e)*Math.pow((Math.random()+Math.random()+Math.random())/3,.5))}document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("splash-screen"),t=document.getElementById("start-game-btn");function n(){let e=new GameState,t=new UIManager,n=new SimulationService(e,t),r=new TutorialService(e,t,n,t.navStructure),a=new MissionService(e,t);n.setTutorialService(r),n.setMissionService(a),a.setSimulationService(n);let i=new EventManager(e,n,t,r),o=e.loadGame();o||(e.startNewGame(""),n.startIntroSequence()),i.bindEvents(),o&&(document.getElementById("game-container").classList.remove("hidden"),t.render(e.getState())),r.checkState({type:"SCREEN_LOAD",screenId:e.activeScreen})}t.addEventListener("click",()=>{e.classList.add("modal-hiding"),e.addEventListener("animationend",()=>{e.style.display="none"},{once:!0}),n()},{once:!0})});